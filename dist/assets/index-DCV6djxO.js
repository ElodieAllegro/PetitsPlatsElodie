(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(i){if(i.ep)return;i.ep=!0;const c=s(i);fetch(i.href,c)}})();function k(t){const e=[],s="assets/imgRecipes/",n=document.querySelector(".recipes");n.innerHTML="",t.forEach(i=>{const c=document.createElement("article");c.className="recipe-card",n.appendChild(c);const a=document.createElement("div");a.className="image-container",c.appendChild(a);const g=document.createElement("img");g.className="img-fluid",g.src=s+i.image,g.alt=i.name,a.appendChild(g);const y=document.createElement("p");y.className="recipe-time",y.textContent=`${i.time} min`,a.appendChild(y);const u=document.createElement("div");u.className="recipe-div",c.appendChild(u);const L=document.createElement("h2");L.textContent=i.name,u.appendChild(L);const v=document.createElement("h4");v.textContent="Recette",u.appendChild(v);const m=document.createElement("p");m.className="recipe-description",m.textContent=i.description,e.push(i.description),u.appendChild(m);const p=document.createElement("div");p.className="recipe-ingredient",u.appendChild(p);const h=document.createElement("h4");h.textContent="Ingrédients",p.appendChild(h);const o=document.createElement("ul");o.className="ingredients-list",p.appendChild(o),i.ingredients.forEach(l=>{const r=document.createElement("div");r.classList.add("div-ingredient");const d=document.createElement("li");d.classList.add("ingredient-name"),d.textContent=l.ingredient,r.appendChild(d);const f=document.createElement("li");f.classList.add("ingredient-detail");let N="";l.quantity&&(N+=l.quantity),l.unit&&(N+=` ${l.unit}`),f.textContent=N,r.appendChild(f),o.appendChild(r)})})}function T(t,e,s,n,i){const c=document.querySelector("#ingredient"),a=document.querySelector("#ustensil"),g=document.querySelector("#appliance"),y=[],u=[],L=[];t.forEach(o=>{o.ustensils.forEach(r=>{const d=r.toLowerCase();y.includes(d)||y.push(d)}),o.ingredients.forEach(r=>{const d=r.ingredient.toLowerCase();u.includes(d)||u.push(d)});const l=o.appliance.toLowerCase();L.includes(l)||L.push(l)});const v=(o,l,r)=>{const d=document.querySelector(`#${l}`),f=document.createElement("p");f.className="list-item-container",f.innerText=o.innerText,o.style.display="none",d.appendChild(f),f.addEventListener("click",()=>{f.remove(),i(r,o.innerText),o.style.display="block"})},m=document.createElement("div");m.className="list-group",m.id="ingredient-list",u.forEach(o=>{const l=document.createElement("p");l.textContent=o,m.appendChild(l),l.addEventListener("click",r=>{e(o),v(r.target,"ingredient-container","ingredient")})});const p=document.createElement("div");p.className="list-group",p.id="ustensil-list",y.forEach(o=>{const l=document.createElement("p");l.textContent=o,p.appendChild(l),l.addEventListener("click",r=>{s(o),v(r.target,"ustensil-container","ustensil")})});const h=document.createElement("div");h.className="list-group",h.id="appliance-list",L.forEach(o=>{const l=document.createElement("p");l.textContent=o,h.appendChild(l),l.addEventListener("click",r=>{n(o),v(r.target,"appliance-container","appliance")})}),c.appendChild(m),a.appendChild(p),g.appendChild(h),c.addEventListener("click",o=>{console.log(o.target),o.target.tagName==="SPAN"&&A(c,m)}),a.addEventListener("click",o=>{o.target.tagName==="SPAN"&&A(a,p)}),g.addEventListener("click",o=>{o.target.tagName==="SPAN"&&A(g,h)}),document.addEventListener("click",P),document.addEventListener("click",R)}function A(t,e){const s=document.querySelectorAll(".category-button"),n=document.querySelectorAll(".list-group");s.forEach(c=>{c===t?c.classList.toggle("open"):c.classList.remove("open")}),s.forEach(c=>{const a=c.querySelector("input");a&&(a.style.display="none")}),n.forEach(c=>{c!==e&&(c.style.display="none")});const i=t.querySelector("input");i.style.display==="block"?(i.style.display="none",e.style.display="none"):(i.style.display="block",e.style.display="block")}function P(t){const e=document.querySelectorAll(".fa-chevron-down");let s=!1;e.forEach(n=>{n===t.target&&(s=!0)}),s&&B()}function R(t){const e=document.querySelectorAll(".category-button");let s=!1;e.forEach(n=>{n.contains(t.target)?s=!0:n.classList.remove("open")}),s||B()}function B(){const t=document.querySelectorAll(".category-button"),e=document.querySelectorAll(".list-group");t.forEach(s=>{const n=s.querySelector("input");n&&(n.style.display="none",n.value="")}),e.forEach(s=>{s.style.display="none",s.querySelectorAll("p").forEach(i=>{i.style.display="block"})})}const I=(t,e)=>{const s=document.querySelectorAll(`#${t} .container-list-btn p`),n=document.querySelectorAll(`#${t} .list-group p`);s.forEach(i=>{i.innerText===e&&i.remove()}),n.forEach(i=>{i.innerText===e&&(i.style.display="block")})};let S=[],q=[],E=[],w=[];async function D(){w=await(await fetch("data/recipes.json")).json(),k(w),T(w,M,O,U,$)}const x=(t,e)=>{const s=document.querySelector(".selected-container"),n=document.createElement("li");n.innerHTML=t;const i=document.createElement("i");i.className="fa-solid fa-xmark",n.appendChild(i),s.appendChild(n),n.addEventListener("click",()=>{e(),n.remove(),C()})},M=t=>{S.push(t),x(t,()=>{S=S.filter(e=>e!==t),I("ingredient",t)}),C()},O=t=>{q.push(t),x(t,()=>{q=q.filter(e=>e!==t),I("ustensil",t)}),C()},U=t=>{E.push(t),x(t,()=>{E=E.filter(e=>e!==t),I("appliance",t)}),C()},$=(t,e)=>{t==="ingredient"?S=S.filter(n=>n!==e):t==="ustensil"?q=q.filter(n=>n!==e):t==="appliance"&&(E=E.filter(n=>n!==e)),C(),document.querySelectorAll(".selected-container li").forEach(n=>{n.innerText===e&&n.remove()})},b=t=>{let e;if(t==="ingredient"?e=document.getElementById("ingredient-search-input").value.toLowerCase():t==="ustensil"?e=document.getElementById("ustensil-search-input").value.toLowerCase():t==="appliance"&&(e=document.getElementById("appliance-search-input").value.toLowerCase()),!e||e.length<3){document.querySelectorAll(".list-group p").forEach(n=>{n.style.display="block"});return}document.querySelectorAll(".list-group p").forEach(n=>{n.textContent.toLowerCase().includes(e)?n.style.display="block":n.style.display="none"})},j=t=>{const e=t.ingredients.map(({ingredient:s})=>s.toLowerCase());return S.every(s=>e.includes(s.toLowerCase()))},G=t=>{const e=t.ustensils.map(s=>s.toLowerCase());return q.every(s=>e.includes(s.toLowerCase()))},H=t=>{const e=t.appliance.toLowerCase();return E.length===0||E.some(s=>s.toLowerCase()===e)},F=t=>{const e=document.querySelector(".search-bar").value.toLowerCase();if(e.length<3)return!0;const s=t.name.toLowerCase().includes(e),n=t.ingredients.some(({ingredient:c})=>c.toLowerCase().includes(e)),i=t.description.toLowerCase().includes(e);return s||n||i},K=t=>{console.log("Mise à jour du compteur avec :",t);const e=document.getElementById("recipe-count");e&&(e.innerText=` ${t} Recettes`)},C=()=>{const t=w.filter(e=>j(e)&&G(e)&&H(e)&&F(e));K(t.length),k(t)};document.getElementById("ingredient-search-input").addEventListener("input",()=>b("ingredient"));document.getElementById("ustensil-search-input").addEventListener("input",()=>b("ustensil"));document.getElementById("appliance-search-input").addEventListener("input",()=>b("appliance"));document.querySelector(".search-bar").addEventListener("input",C);const z=async()=>{await D(),C()};z();
